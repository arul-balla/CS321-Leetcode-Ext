(this["webpackJsonpcs321-project"]=this["webpackJsonpcs321-project"]||[]).push([[0],{118:function(e,t,n){},119:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a=n(31),s=n(0),o=n.n(s),r=n(11),i=n.n(r),c=(n(118),n.p,n(119),n(14)),l=n(29),d=n(30),h=n(35),p=n(34),u=n(200),j=n(202),b=n(20),m=n.n(b),g=n(203),x=n(201),f=n(206),O=n(37),v=o.a.createContext(null),y=n(2),w=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};m.a.post("/login",t).then((function(e){var t="Bearer ".concat(e.data.token);localStorage.setItem("FBIdToken",t),m.a.defaults.headers.common.Authorization=t,a.context.setLoggedIn(!0),a.handleClose(),a.props.history.push("/")})).catch((function(e){a.setState({errors:e.response.data}),"auth/invalid-email"===e.response.data.error?a.setState({errors:{email:"Invalid email"}}):""!==e.response.data.general&&a.setState({errors:{password:"Wrong Credentials, Please try again"}})}))},a.state={open:!1,email:"",password:"",errors:{}},a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){e.match!==this.props.match&&this.setState({open:void 0!==this.props.match&&"open"===this.props.match.params.open})}},{key:"componentDidMount",value:function(){this.setState({open:void 0!==this.props.match&&"open"===this.props.match.params.open})}},{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsxs)(x.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(y.jsx)(g.a,{style:{fontSize:"28px"},children:"Login"}),Object(y.jsx)(f.a,{children:Object(y.jsxs)("form",{style:{alignItems:"center",padding:"1%"},noValidate:!0,onSubmit:this.handleSubmit,children:[Object(y.jsx)(u.a,{id:"email",name:"email",type:"email",label:"Email",style:{width:"400px"},value:this.state.email,onChange:this.handleChange,helperText:this.state.errors.email,error:!!this.state.errors.email}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{id:"password",name:"password",type:"password",label:"Password",helperText:this.state.errors.password,style:{width:"400px"},error:!!this.state.errors.password,value:this.state.password,onChange:this.handleChange}),Object(y.jsx)("br",{}),Object(y.jsx)(j.a,{style:{marginTop:"3%",left:"30%"},type:"submit",variant:"contained",color:"primary",children:"Submit"}),Object(y.jsx)("br",{}),Object(y.jsxs)("small",{style:{paddingLeft:"15%",paddingTop:"2%"},children:["Don't have an account? Sign Up ",Object(y.jsx)(O.b,{to:"/signup/open",children:"here"})," "]})]})})]})})}}]),n}(s.Component);w.contextType=v;var S=w,C=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password,confirmPassword:a.state.confirmPassword,userHandle:a.state.userHandle};m.a.post("/signup",t).then((function(e){var t="Bearer ".concat(e.data.token);localStorage.setItem("FBIdToken",t),m.a.defaults.headers.common.Authorization=t,a.context.setLoggedIn(!0),a.handleClose(),console.log("SUCCESS!")})).catch((function(e){console.log(e.response),a.setState({errors:e.response.data}),"auth/invalid-email"===e.response.data.error&&a.setState({errors:{email:"Invalid email or already in use"}})}))},a.state={open:!0,email:"",password:"",confirmPassword:"",userHandle:"",errors:{}},a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){e.match!==this.props.match&&this.setState({open:void 0!==this.props.match&&"open"===this.props.match.params.open})}},{key:"componentDidMount",value:function(){this.setState({open:void 0!==this.props.match&&"open"===this.props.match.params.open})}},{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsxs)(x.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(y.jsx)(g.a,{style:{fontSize:"28px"},children:"Sign Up"}),Object(y.jsx)(f.a,{children:Object(y.jsxs)("form",{style:{alignItems:"center",padding:"1%"},noValidate:!0,onSubmit:this.handleSubmit,children:[Object(y.jsx)(u.a,{id:"email",name:"email",type:"email",label:"Email",style:{width:"400px"},value:this.state.email,onChange:this.handleChange,helperText:this.state.errors.email,error:!!this.state.errors.email}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{id:"password",name:"password",type:"password",label:"Password",helperText:this.state.errors.password,style:{width:"400px"},error:!!this.state.errors.password,value:this.state.password,onChange:this.handleChange}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Password",helperText:this.state.errors.confirmPassword,style:{width:"400px"},error:!!this.state.errors.confirmPassword,value:this.state.confirmPassword,onChange:this.handleChange}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{id:"userHandle",name:"userHandle",label:"User Handle",helperText:this.state.errors.handle,style:{width:"400px"},error:!!this.state.errors.handle,value:this.state.userHandle,onChange:this.handleChange}),Object(y.jsx)("br",{}),Object(y.jsx)(j.a,{style:{marginTop:"3%",left:"30%"},type:"submit",variant:"contained",color:"primary",children:"Submit"}),Object(y.jsx)("br",{}),Object(y.jsxs)("small",{style:{paddingLeft:"15%",paddingTop:"2%"},children:["Already have an account? Login ",Object(y.jsx)(O.b,{to:"/login/open",children:"here"})]})]})})]})})}}]),n}(s.Component);C.contextType=v;var k=C,I=n(27),T=n(8),L=n(195),P=n(196),D=n(197),H=n(194),A=n(205),z=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={users:[],problems:[],categories:[],open:!1},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;m.a.get("/users").then((function(t){return e.setState({users:t.data.users}),e.state.users})).then((function(t){t.forEach((function(t){m.a.get("/getproblem/".concat(t)).then((function(e){return e.data})).then((function(t){e.setState({problems:[].concat(Object(I.a)(e.state.problems),[t])})})).catch((function(e){console.log(e)})),m.a.get("/problemcounts/".concat(t)).then((function(e){return e.data})).then((function(n){e.setState({categories:[].concat(Object(I.a)(e.state.categories),[{user:t,problemCounts:n}])})})).catch((function(e){console.log(e)}))}))})).catch((function(e){console.log(e)}))}},{key:"getProblems",value:function(e){m.a.get("/getproblem/".concat(e)).then((function(e){return e.data})).catch((function(e){console.log(e.response)}))}},{key:"render",value:function(){var e=this;this.props;return Object(y.jsx)(H.a,{container:!0,direction:"row",alignItems:"center",justify:"center",spacing:5,xs:12,style:{paddingTop:"3%"},children:void 0!==this.state.problems&&this.state.problems.map((function(t){return Object(y.jsx)(H.a,{item:!0,children:t.length>0&&Object(y.jsx)(L.a,{children:Object(y.jsxs)(P.a,{children:[t.length>0&&Object(y.jsx)("h1",{children:t[0].userHandle}),t.length>0&&t.map((function(e){return Object(y.jsxs)(H.a,{container:!0,direction:"row",alignItems:"left",justify:"left",spacing:5,children:[Object(y.jsx)(H.a,{item:!0,children:Object(y.jsx)(D.a,{variant:"body2",color:"textSecondary",component:"p",children:e.title})}),Object(y.jsx)(H.a,{item:!0,children:Object(y.jsxs)(D.a,{variant:"body2",color:"textSecondary",component:"p",children:[e.time," minutes"]})})]})})),t.length>0&&e.state.categories.map((function(e){return Object(y.jsx)("div",{children:e.user===t[0].userHandle&&Object.keys(e.problemCounts).map((function(n,a){return Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{children:n}),Object(y.jsx)(A.a,{variant:"determinate",value:e.problemCounts[n]/t.length*100})]})}))})}))]})})})}))})}}]),n}(s.Component),B=Object(T.a)({root:{alignSelf:"center"}})(z),U=n(99),E=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={handle:"",email:"",createdAt:"",problems:[],categories:{}},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;m.a.get("/userInfo",{headers:{Authorization:"".concat(localStorage.getItem("FBIdToken"))}}).then((function(t){return e.setState({createdAt:t.data.createdAt,email:t.data.email,handle:t.data.handle}),e.state})).then((function(t){m.a.get("/getproblem/".concat(t.handle)).then((function(e){return e.data})).then((function(t){e.setState({problems:t})})).catch((function(e){console.log(e)})),m.a.get("/problemcounts/".concat(e.state.handle)).then((function(e){return e.data})).then((function(t){e.setState({categories:t})})).catch((function(e){console.log(e)}))})).catch((function(e){return console.log(e.response)}))}},{key:"render",value:function(){var e=this;this.props.classes;return Object(y.jsxs)(U.a,{elevation:16,style:{margin:"2%",padding:"2%"},children:[Object(y.jsx)("h1",{children:"My Profile"}),Object(y.jsxs)(H.a,{container:!0,direction:"row",alignItems:"center",justify:"center",spacing:2,children:[Object(y.jsxs)(H.a,{item:!0,xs:4,children:[Object(y.jsx)("h1",{children:this.state.handle}),Object(y.jsx)("h2",{children:this.state.email})]}),Object(y.jsx)(H.a,{item:!0,xs:3,children:this.state.problems.length>0&&this.state.problems.map((function(e){return Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{children:e.title}),Object(y.jsxs)(D.a,{variant:"body2",color:"textSecondary",component:"p",children:[e.time," minutes"]})]})}))}),Object(y.jsx)(H.a,{item:!0,xs:5,children:Object.keys(this.state.categories).map((function(t,n){return Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{children:t}),Object(y.jsx)(A.a,{variant:"determinate",value:e.state.categories[t]/e.state.problems.length*100})]})}))})]})]})}}]),n}(s.Component),W=Object(T.a)({button:{background:"gainsboro",width:"50%"},h1:{fontWeight:"normal"},box:{height:"10px",width:"900px",marginLeft:"17%",backgroundImage:"linear-gradient(to right, black , white)"},h3:{fontWeight:"normal",display:"inline-block",paddingTop:"5px",paddingLeft:"30%"},h32:{fontWeight:"normal",display:"inline-block",paddingTop:"5px",paddingLeft:"20%",textAlign:"center",maxWidth:"400px"},img:{display:"block",paddingTop:"30px",width:"200px",height:"200px",cursor:"pointer"},IG:{width:"42px",height:"42px","&:hover":{opacity:"0.7"}}})(E),M=(["PT Sans","sans-serif"].join(","),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){this.props.classes;return Object(y.jsxs)("div",{style:{paddingTop:"5%"},children:[Object(y.jsx)(v.Consumer,{children:function(e){var t=e.loggedIn;e.setLoggedIn;return t?Object(y.jsx)(W,{}):null}}),Object(y.jsx)(B,{})]})}}]),n}(s.Component));M.contexType=v;var N=M,F=n(15),G=n(198),R=n(199),J=Object(T.a)({root:{display:"flex",flexGrow:1,backgroundImage:"linear-gradient(90deg, black, white)",overflowX:"hidden"},img:{maxWidth:"60px",height:"auto",marginRight:"12px"},title:{flexGrow:1,textDecoration:"none",color:"#fff",textAlign:"left",fontSize:"36px","&:hover":{color:"gainsboro"}},div:{opacity:"3.0",filter:"brightness(70%)"},button:{opacity:"0.8",color:"black",fontSize:"18px",marginRight:"10px",textTransform:"none"}})((function(e){var t=e.classes;return Object(y.jsx)(v.Consumer,{children:function(e){var n=e.loggedIn,a=e.setLoggedIn;return Object(y.jsx)(G.a,{position:"fixed",className:t.root,elevation:0,children:Object(y.jsxs)(R.a,{children:[Object(y.jsx)(D.a,{className:t.title,children:"LC Tracker"}),Object(y.jsx)(j.a,{className:t.button,component:O.b,to:"/",children:"Home"}),n?Object(y.jsx)("div",{children:Object(y.jsx)(j.a,{className:t.button,component:O.b,to:"/login",onClick:function(){localStorage.removeItem("FBdDToken"),a(!1)},children:"Logout"})}):Object(y.jsx)(j.a,{className:t.button,component:O.b,to:"/login/open",children:"Login"})]})})}})}));m.a.defaults.baseURL="https://us-central1-leetcode-90738.cloudfunctions.net/api";var V=function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(S,{}),Object(y.jsx)(O.a,{children:Object(y.jsxs)("div",{children:[Object(y.jsx)(J,{}),Object(y.jsx)("div",{children:Object(y.jsxs)(F.c,{children:[Object(y.jsx)(F.a,{exact:!0,path:"/CS321-Leetcode-Ext",component:N}),Object(y.jsx)(F.a,{name:"login",exact:!0,path:"/login/:open",component:S}),Object(y.jsx)(F.a,{exact:!0,path:"/signup/:open",component:k})]})})]})})]})},X=function(){var e=Object(s.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(y.jsx)(v.Provider,{value:{loggedIn:n,setLoggedIn:o},children:Object(y.jsx)(V,{})})};i.a.render(Object(y.jsx)(X,{}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.817a495b.chunk.js.map